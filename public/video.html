<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>WebTorrent video player</title>
  <script src="https://cdn.jsdelivr.net/npm/p2p-media-loader-core@latest/build/p2p-media-loader-core.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/p2p-media-loader-hlsjs@latest/build/p2p-media-loader-hlsjs.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/clappr@latest"></script>
  <style>
    body {
      margin: 0;
    }
  </style>
</head>
<body>
  <div id="blackbox-video"></div>
  <script>
    var torrentId = window.location.search.split('?link=');
    if (torrentId[1]) {
      if (p2pml.hlsjs.Engine.isSupported()) {
        var engine = new p2pml.hlsjs.Engine();

        var player = new Clappr.Player({
          parentId: "#blackbox-video",
          source: torrentId[1],
          mute: false,
          autoPlay: false,
          width: '100vw',
          height: '100vh',
          playback: {
            hlsjsConfig: {
              liveSyncDurationCount: 7,
              loader: engine.createLoaderClass()
            }
          }
        });

        p2pml.hlsjs.initClapprPlayer(player);
      } else {
        document.write("Not supported :(");
      }
    }
  </script>

</body>

</html>